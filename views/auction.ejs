<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <% if (message) { %>
    <p class="text-danger-emphasis"><%=message%></p>

    <% } %>
    <div class="row m-1">
      <% for( const item of data ) { %>

      <div class="col-lg-12">
        <div class="bid-item row m-2">
          <% if (item.url) { %>
          <img
            class="col-10 col-sm-10 col-md-7 col-lg-2"
            src="<%=item.url%>"
            alt="car-pic" />

          <% } %>

          <div class="col-10 col-sm-10 col-md-7 col-lg-10 pe-0 me-0">
            <div class="row">
              <p class="col-lg-3" id="detail">Model Name:<%=item.name%></p>

              <p class="col-lg-4" id="detail">
                Bidder Name/Id <%=item.userName%>
              </p>
              <% if (item.prices) { %>
              <p>BId open at <%=item.prices%></p>
              <% } %> <% if (item.bidOpen) { %>
              <form action="/join" method="post">
                <label for="user">
                  User Name:
                  <input id="user" type="text" name="userName" required
                /></label>

                <input
                  id="model"
                  type="hidden"
                  value="<%=item.name%>"
                  name="model"
                  required />

                <label for="bidCall" style="white-space: nowrap"
                  >Your Bid call:
                  <input id="bidCall" type="number" name="bid" required
                /></label>

                <button type="submit">Join Auction</button>
              </form>
              <% } %> <% if (item.user) { %>
              <p class="col-lg-3" id="detail">bid called <%=item.bid%></p>
              <form action="/update" method="post">
                <input type="hidden" value="<%=item.name%>" name="model" />
                <input
                  type="hidden"
                  value="<%=item.userName%>"
                  name="userName" />
                <label>update Bid: <input type="number" name="bid" /></label>
                <button value="update" name="update" type="submit">
                  CHANGE BID
                </button>
                <button value="delete" name="delete" type="submit">
                  DELETE BID
                </button>
              </form>

              <% } %>
            </div>
          </div>
        </div>
      </div>
      <% } %>
    </div>

    <script src="/script.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
      crossorigin="anonymous"></script>
  </body>
</html>
